
CREATE DATABASE  IF NOT EXISTS `beer` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `beer`;


DROP TABLE IF EXISTS `article`;

CREATE TABLE `article` (
  `ID_ARTICLE` int NOT NULL,
  `NOM_ARTICLE` varchar(60) NOT NULL,
  `PRIX_ACHAT` float NOT NULL,
  `VOLUME` int NOT NULL,
  `TITRAGE` float DEFAULT NULL,
  `ID_MARQUE` int DEFAULT NULL,
  `ID_Couleur` int DEFAULT NULL,
  `ID_TYPE` int DEFAULT NULL,
  PRIMARY KEY (`ID_ARTICLE`),
  UNIQUE KEY `ID_ARTICLE` (`ID_ARTICLE`),
  KEY `FK_Article_ID_Couleur` (`ID_Couleur`),
  KEY `FK_Article_ID_MARQUE` (`ID_MARQUE`),
  KEY `FK_Article_ID_TYPE` (`ID_TYPE`),
  CONSTRAINT `FK_Article_ID_Couleur` FOREIGN KEY (`ID_Couleur`) REFERENCES `couleur` (`ID_Couleur`),
  CONSTRAINT `FK_Article_ID_MARQUE` FOREIGN KEY (`ID_MARQUE`) REFERENCES `marque` (`ID_MARQUE`),
  CONSTRAINT `FK_Article_ID_TYPE` FOREIGN KEY (`ID_TYPE`) REFERENCES `type` (`ID_TYPE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;


LOCK TABLES `article` WRITE;

UNLOCK TABLES;

DROP TABLE IF EXISTS `continent`;

CREATE TABLE `continent` (
  `ID_CONTINENT` int NOT NULL,
  `NOM_CONTINENT` varchar(25) NOT NULL,
  PRIMARY KEY (`ID_CONTINENT`),
  UNIQUE KEY `ID_CONTINENT` (`ID_CONTINENT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;


LOCK TABLES `continent` WRITE;
;
UNLOCK TABLES;


DROP TABLE IF EXISTS `couleur`;

CREATE TABLE `couleur` (
  `ID_Couleur` int NOT NULL,
  `NOM_COULEUR` varchar(25) NOT NULL,
  PRIMARY KEY (`ID_Couleur`),
  UNIQUE KEY `ID_Couleur` (`ID_Couleur`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `couleur` WRITE;

UNLOCK TABLES;


DROP TABLE IF EXISTS `fabricant`;

CREATE TABLE `fabricant` (
  `ID_FABRICANT` int NOT NULL,
  `NOM_FABRICANT` varchar(40) NOT NULL,
  PRIMARY KEY (`ID_FABRICANT`),
  UNIQUE KEY `ID_FABRICANT` (`ID_FABRICANT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `fabricant` WRITE;

UNLOCK TABLES;



DROP TABLE IF EXISTS `marque`;

CREATE TABLE `marque` (
  `ID_MARQUE` int NOT NULL,
  `NOM_MARQUE` varchar(40) NOT NULL,
  `ID_PAYS` char(2) DEFAULT NULL,
  `ID_FABRICANT` int DEFAULT NULL,
  PRIMARY KEY (`ID_MARQUE`),
  UNIQUE KEY `ID_MARQUE` (`ID_MARQUE`),
  KEY `FK_Marque_ID_FABRICANT` (`ID_FABRICANT`),
  KEY `FK_Marque_ID_PAYS` (`ID_PAYS`),
  CONSTRAINT `FK_Marque_ID_FABRICANT` FOREIGN KEY (`ID_FABRICANT`) REFERENCES `fabricant` (`ID_FABRICANT`),
  CONSTRAINT `FK_Marque_ID_PAYS` FOREIGN KEY (`ID_PAYS`) REFERENCES `pays` (`ID_PAYS`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `marque` WRITE;

UNLOCK TABLES;


DROP TABLE IF EXISTS `pays`;

CREATE TABLE `pays` (
  `ID_PAYS` char(2) NOT NULL,
  `NOM_PAYS` varchar(40) NOT NULL,
  `ID_CONTINENT` int DEFAULT NULL,
  PRIMARY KEY (`ID_PAYS`),
  KEY `FK_PAYS_ID_CONTINENT` (`ID_CONTINENT`),
  CONSTRAINT `FK_PAYS_ID_CONTINENT` FOREIGN KEY (`ID_CONTINENT`) REFERENCES `continent` (`ID_CONTINENT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `pays` WRITE;

UNLOCK TABLES;

DROP TABLE IF EXISTS `ticket`;

CREATE TABLE `ticket` (
  `ANNEE` int NOT NULL,
  `NUMERO_TICKET` int NOT NULL,
  `DATE_VENTE` datetime NOT NULL,
  PRIMARY KEY (`ANNEE`,`NUMERO_TICKET`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `ticket` WRITE;

UNLOCK TABLES;

DROP TABLE IF EXISTS `type`;

CREATE TABLE `type` (
  `ID_TYPE` int NOT NULL,
  `NOM_TYPE` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`ID_TYPE`),
  UNIQUE KEY `ID_TYPE` (`ID_TYPE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;


LOCK TABLES `type` WRITE;

UNLOCK TABLES;

DROP TABLE IF EXISTS `ventes`;

CREATE TABLE `ventes` (
  `ANNEE` int NOT NULL,
  `NUMERO_TICKET` int NOT NULL,
  `ID_ARTICLE` int NOT NULL,
  `QUANTITE` int DEFAULT NULL,
  PRIMARY KEY (`ANNEE`,`NUMERO_TICKET`,`ID_ARTICLE`),
  KEY `FK_Vendre_ID_ARTICLE` (`ID_ARTICLE`),
  CONSTRAINT `FK_Vendre_ID_ARTICLE` FOREIGN KEY (`ID_ARTICLE`) REFERENCES `article` (`ID_ARTICLE`),
  CONSTRAINT `FK_Vendre_Ventes` FOREIGN KEY (`ANNEE`, `NUMERO_TICKET`) REFERENCES `ticket` (`ANNEE`, `NUMERO_TICKET`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

LOCK TABLES `ventes` WRITE;

UNLOCK TABLES;
